<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Studio (Reset) - El Viaje de ilfass</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <script type="module" src="/js/main.js"></script>
    <style>
        html, body, #stage {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
            background: #0a0a0f;
        }
        #stage { position: relative; }
    </style>
</head>
<body>
    <div id="stage"></div>
    <div id="debug-layer" style="display:none; position:fixed; top:10px; left:10px; z-index:10000; background:rgba(0,0,0,0.8); color:#fff; padding:10px; font-family:monospace; font-size:12px;">
        <div id="mode-indicator">Modo: --</div>
        <div id="fps-counter">FPS: --</div>
    </div>
</body>
</html>

<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ILFASS Studio - Streaming</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&family=JetBrains+Mono:wght@400;700&family=Outfit:wght@300;400;600;700;800;900&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/css/styles.css?v=15" />
  <link rel="stylesheet" href="/css/branding.css?v=15" />
  <style>
    html, body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: #0a0a0f;
    }
    /* Studio root */
    #studio-root {
      width: 100vw;
      height: 100vh;
      position: relative;
      background: #0a0a0f;
    }
    /* Forzar animación de parpadeo para LIVE */
    @keyframes liveBlink {
      0%, 100% { 
        opacity: 1; 
        box-shadow: 0 0 24px rgba(239,68,68,0.7), 0 0 48px rgba(239,68,68,0.4);
      }
      50% { 
        opacity: 0.5; 
        box-shadow: 0 0 36px rgba(239,68,68,1), 0 0 72px rgba(239,68,68,0.6);
      }
    }
    .tv-title .badge {
      animation: liveBlink 1.2s ease-in-out infinite !important;
    }
    #tv-status.status-live {
      animation: liveBlink 1.2s ease-in-out infinite !important;
    }
  </style>
</head>
<body>
  <div id="studio-root"></div>
  <script type="module" src="/js/studio.js?v=14"></script>
  <script>
    // SOLUCIÓN ROBUSTA: Parpadeo que espera a que el Studio se monte
    (function() {
      let blinkState = true;
      let blinkInterval = null;
      
      function blinkLiveButtons() {
        // Buscar TODOS los elementos posibles que contengan "LIVE"
        const allElements = document.querySelectorAll('*');
        const liveElements = [];
        
        allElements.forEach(el => {
          const text = (el.textContent || '').trim();
          const hasLive = text === 'LIVE' || text.includes('LIVE');
          const isBadge = el.classList.contains('badge') || el.id === 'tv-live-badge';
          const isStatus = el.id === 'tv-status' || el.classList.contains('status-live');
          
          if (hasLive && (isBadge || isStatus || el.tagName === 'DIV')) {
            liveElements.push(el);
          }
        });
        
        liveElements.forEach(el => {
          el.style.opacity = blinkState ? '1' : '0.3';
          el.style.transition = 'opacity 0.5s ease-in-out';
          el.style.boxShadow = blinkState 
            ? '0 0 20px rgba(239,68,68,0.8), 0 0 40px rgba(239,68,68,0.5)' 
            : '0 0 30px rgba(239,68,68,1), 0 0 60px rgba(239,68,68,0.7)';
          el.setAttribute('data-blink-active', 'true');
        });
        
        blinkState = !blinkState;
      }
      
      function startBlinking() {
        if (blinkInterval) return;
        blinkLiveButtons();
        blinkInterval = setInterval(blinkLiveButtons, 500);
      }
      
      // Ejecutar inmediatamente
      startBlinking();
      
      // Esperar a que el Studio se monte (puede tardar)
      setTimeout(startBlinking, 1000);
      setTimeout(startBlinking, 2000);
      setTimeout(startBlinking, 3000);
      
      // Observar cambios en el DOM
      const observer = new MutationObserver(() => {
        startBlinking();
      });
      
      if (document.body) {
        observer.observe(document.body, { 
          childList: true, 
          subtree: true, 
          attributes: true,
          attributeFilter: ['class', 'id']
        });
      }
      
      // También cuando el DOM esté listo
      if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', startBlinking);
      }
      
      // Exponer función global para debugging
      window.forceBlink = blinkLiveButtons;
    })();
  </script>
</body>
</html>

