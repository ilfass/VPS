<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Sistema - Terminal</title>
    <link href="../../css/styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            background: #050505;
            color: #33ff33;
            font-family: 'JetBrains Mono', monospace;
            overflow: hidden;
            padding: 20px;
        }

        #terminal-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 20px;
            height: 95vh;
        }

        .term-panel {
            border: 1px solid rgba(51, 255, 51, 0.3);
            background: rgba(0, 20, 0, 0.8);
            border-radius: 4px;
            padding: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 10px rgba(51, 255, 51, 0.1);
        }

        .term-header {
            border-bottom: 1px solid rgba(51, 255, 51, 0.3);
            padding-bottom: 5px;
            margin-bottom: 10px;
            font-weight: 700;
            color: #33ff33;
            text-transform: uppercase;
            font-size: 0.8rem;
            display: flex;
            justify-content: space-between;
        }

        .log-stream {
            font-size: 0.7rem;
            line-height: 1.4;
            color: rgba(255, 255, 255, 0.8);
            height: 100%;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
        }

        .log-line {
            margin-bottom: 2px;
            text-shadow: 0 0 2px rgba(51, 255, 51, 0.5);
        }

        .log-success {
            color: #33ff33;
        }

        .log-warn {
            color: #ffff33;
        }

        .log-err {
            color: #ff3333;
        }

        .log-info {
            color: #33ccff;
        }

        /* Mapa ASCII o Datos */
        #hex-view {
            font-size: 0.6rem;
            color: rgba(51, 255, 51, 0.6);
            white-space: pre;
            overflow: hidden;
        }

        .cursor {
            display: inline-block;
            width: 8px;
            height: 14px;
            background: #33ff33;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            50% {
                opacity: 0;
            }
        }

        .progress-bar {
            height: 4px;
            background: rgba(51, 255, 51, 0.2);
            margin-top: 5px;
            width: 100%;
        }

        .progress-fill {
            height: 100%;
            background: #33ff33;
            width: 0%;
            transition: width 0.2s;
        }
    </style>
</head>

<body>
    <div class="tv-scene-root">
        <div class="tv-bg">
            <div class="tv-bg-grid"></div>
        </div>

        <!-- TV Header -->
        <div class="tv-topbar">
            <div class="tv-title">
                <div class="badge">LIVE</div>
                <div class="t1">SISTEMA</div>
                <div class="t2">TERMINAL DE CONTROL</div>
            </div>
            <div class="tv-meta">
                <div class="pill">KERNEL_V10.4</div>
                <div class="pill">UPTIME_MONITOR</div>
            </div>
        </div>

        <!-- Main Content -->
        <div id="terminal-grid" style="position: relative; z-index: 5; margin-top: 60px; height: calc(100vh - 140px);">
            <!-- Main Log -->
            <div class="term-panel" style="grid-row: span 2;">
                <div class="term-header">
                    <span>>> SYSTEM_KERNEL_V10.4</span>
                    <span id="uptime">UPTIME: 00:00:00</span>
                </div>
                <div class="log-stream" id="main-log"></div>
            </div>

            <!-- Metric Block -->
            <div class="term-panel">
                <div class="term-header">>> NEURAL_PROCESSOR</div>
                <div id="hex-view">
                    INITIALIZING HEURISTIC CORE...
                    LOADING NARRATIVE MODULES...
                    -----------------------------
                    CPU0: [||||||||||||....] 72%
                    CPU1: [||||||||........] 45%
                    MEM: [||||||||||||||..] 88%
                    NET: [||||||||||......] 560mbps
                </div>
                <div style="margin-top: 20px;">
                    <div style="font-size: 0.7rem;">ANALYSIS_PROGRESS</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="p-bar-1"></div>
                    </div>
                </div>
            </div>

            <!-- Status Block -->
            <div class="term-panel">
                <div class="term-header">>> ACTIVE_NODES</div>
                <div class="log-stream" id="node-log" style="color: #ccccff;">
                    > CONNECT_YT_API..... OK
                    > CONNECT_TOMTOM..... OK
                    > CONNECT_OPENAI..... STANDBY
                    > AUDIO_ENGINE....... ACTIVE
                    > TTS_SERVICE........ READY
                </div>
            </div>
        </div>

        <!-- TV Ticker -->
        <div class="tv-ticker">
            <div class="label">LOGS</div>
            <div class="msg">SISTEMA OPERATIVO CENTRAL • EJECUTANDO DIAGNÓSTICO PROFUNDO • VALIDANDO INTEGRIDAD DE
                MEMORIA</div>
        </div>
    </div>

    <script>
        // Log Generator
        const logs = document.getElementById('main-log');
        const pBar = document.getElementById('p-bar-1');

        const verbs = ['ANALYZING', 'FETCHING', 'PARSING', 'COMPILING', 'OPTIMIZING', 'ENCRYPTING', 'DECODING'];
        const nouns = ['packet', 'cluster', 'node', 'shard', 'vector', 'neural_path', 'context', 'frame'];
        const statuses = ['COMPLETE', 'OK', 'PENDING', 'BUFFERING', 'SYNCED'];

        function rand(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

        function addLog() {
            const now = new Date().toISOString().split('T')[1].slice(0, 12);
            const type = Math.random() > 0.9 ? 'WARN' : (Math.random() > 0.95 ? 'ERR' : 'INFO');
            const cls = type === 'INFO' ? 'log-info' : (type === 'WARN' ? 'log-warn' : 'log-err');

            let msg = `${rand(verbs)} ${rand(nouns).toUpperCase()}_${Math.floor(Math.random() * 999)}`;
            if (Math.random() > 0.5) msg += ` > ${rand(statuses)}`;

            const line = document.createElement('div');
            line.className = 'log-line';
            line.innerHTML = `<span style="color:#666">[${now}]</span> <span class="${cls}">${type}</span>: ${msg}`;

            logs.appendChild(line);
            if (logs.children.length > 25) logs.removeChild(logs.children[0]);
        }

        // Animate Logs
        setInterval(addLog, 150);

        // Uptime
        const start = Date.now();
        setInterval(() => {
            const diff = Date.now() - start;
            const h = Math.floor(diff / 3600000).toString().padStart(2, '0');
            const m = Math.floor((diff % 3600000) / 60000).toString().padStart(2, '0');
            const s = Math.floor((diff % 60000) / 1000).toString().padStart(2, '0');
            const ms = Math.floor((diff % 1000) / 10).toString().padStart(2, '0');
            document.getElementById('uptime').innerText = `UPTIME: ${h}:${m}:${s}.${ms}`;

            // Random gauge movement
            if (Math.random() > 0.5) {
                pBar.style.width = Math.floor(Math.random() * 100) + '%';
            }
        }, 80);

        // Hex rain simulation
        const hexView = document.getElementById('hex-view');
        // Initial static content
    </script>
    <script type="module" src="../../js/main.js"></script>
</body>

</html>